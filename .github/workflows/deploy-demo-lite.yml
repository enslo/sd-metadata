name: Deploy Demo Lite Site

on:
  release:
    types: [published]
  workflow_dispatch:

jobs:
  trigger-cloudflare-deploy:
    runs-on: ubuntu-latest
    if: >-
      github.event_name == 'workflow_dispatch' ||
      startsWith(github.event.release.tag_name, 'lite@')
    steps:
      - name: Trigger Cloudflare Pages Deploy
        run: |
          curl -X POST "${{ secrets.CLOUDFLARE_DEPLOY_HOOK_LITE }}"

      - name: Deployment info
        run: |
          echo "Cloudflare Pages deployment triggered!"
          echo "Release: ${{ github.event.release.tag_name || 'manual' }}"
          echo "Demo lite site will be updated shortly."
